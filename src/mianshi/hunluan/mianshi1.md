# 面试题总结

## 1.事件循环理解
事件循环（Event Loop）是 JavaScript 异步编程实现的核心机制之一。它负责在同步任务执行完毕后，从任务队列中取出异步任务并执行。

JavaScript 代码分为同步任务和异步任务两种类型。同步任务直接按顺序执行；异步任务会先被放入任务队列中等待，直到 Event Loop 取出它们并执行。

在实现中，Event Loop 维护了一个任务队列，包含两类任务：宏任务和微任务。宏任务包括 I/O 回调、定时器回调等，而微任务主要是 Promise 和 async/await 生成的任务。

在执行任务时，首先会执行当前栈内的所有任务，然后查看是否有微任务，如果有则立即执行微任务，直到全部微任务都完成，再执行宏任务。这里需要注意，微任务的优先级高于宏任务。

当执行宏任务时，如果其中创建了新的任务，则将这些任务加入到任务队列中等待执行。

总体来说，JavaScript 异步编程离不开事件循环机制的支持，了解事件循环原理可以帮助开发者更好地理解和利用 JavaScript 的异步特性。

————————————————

## 37.客端怎么处理JS事件失效的问题
当客户端遇到JavaScript事件失效的问题时，可以尝试以下解决方法：

1. 检查代码错误：检查JavaScript代码中是否存在错误，如语法错误、逻辑错误等。使用开发者工具（如浏览器的控制台）查看是否有报错信息，并逐个排查和修复错误。
2. 确保元素存在：确保事件绑定的元素存在于DOM中。如果元素是动态生成的，需要确保在绑定事件之前元素已经被正确创建和插入到DOM中。
3. 绑定事件顺序：确认事件绑定的顺序是否正确。某些情况下，先后绑定多个事件可能会影响它们的执行顺序，导致事件失效。可以按照需要调整事件绑定的顺序，或合理使用事件委托以确保事件能够正常执行。
4. 避免重复绑定：确保事件只绑定一次，避免重复绑定相同的事件。多次绑定同一事件可能会导致事件触发多次或执行顺序混乱，从而产生问题。
5. 检查事件类型和选择器：确认事件类型和事件处理函数的选择器是否匹配。例如，如果绑定了点击事件，但用户实际操作的是键盘回车键，那么事件不会触发。还需确保选择器与目标元素的结构和属性匹配。
6. 确认事件绑定时机：部分情况下，可能是由于在合适的时机绑定事件。确保在DOM完全加载（如DOMContentLoaded或window.onload事件）之后再绑定事件，以避免因为元素尚未加载完成而导致事件失效。
7. 考虑事件代理：对于动态生成的元素或大量重复元素，可以使用事件代理（Event Delegation）的方式来绑定事件。通过将事件绑定在它们的祖先元素上，利用事件冒泡原理捕获并处理目标元素的事件，从而简化事件绑定和改善性能。
8. 测试兼容性：不同浏览器对某些事件的支持和实现可能存在差异，可能导致事件失效。可进行跨浏览器测试，查看是否有兼容性问题，并根据需要进行针对性的处理和修复。
    ————————————————
## 40.如果有一个非常大的react页面 我想优先渲染某一部分该怎么做
如果你有一个非常大的React页面，并且希望优先加载和渲染其中的某一部分，可以考虑以下几种方法：
1. 组件拆分：将整个页面拆分成多个小组件，按照页面的逻辑结构划分。然后，确保优先加载和渲染需要优先显示的部分所对应的组件，而将其他部分作为延迟加载的组件。这样，用户首先能够看到并与重要内容进行交互，而不必等待整个页面全部加载完成。
2. Code Splitting（代码分割）：使用Webpack或者其他打包工具支持的Code Splitting功能，将页面中的代码拆分成多个独立的块（chunks）。可以通过动态导入（dynamic import）、React.lazy()和Suspense组件等技术，根据需要按需加载特定模块，并在加载时显示占位符。这样可以实现在网页加载过程中逐步渲染各个模块的效果，优先展示目标部分。
3. Virtualized rendering（虚拟化渲染）：对于大量数据列表，可以使用虚拟化渲染技术，如react-virtualized、react-window或react-lazy-load等库，只渲染可视区域内的部分，延迟加载其余部分。这种方式可以减少初始渲染的负载，并提高性能和用户体验。
4. 懒加载图片：对于页面中的图片资源，可以使用懒加载（lazy loading）技术。当用户滚动到图片所在的位置时，再进行真正的加载和显示，而不是一次性加载所有的图片。使用像LazyLoad这样的React库可以方便地实现图片懒加载。

## 47.前端跨域有什么好的解决方案
前端跨域是指在浏览器环境下，当一个网页的执行环境（源）与该网页所请求资源的服务器域名、端口或协议不一致时，会出现跨域问题。为了解决前端跨域问题，可以采用以下几种常见的解决方案：

1. JSONP（JSON with Padding）：利用 标签的可跨域特性，通过动态创建 标签并指定请求的 URL，服务器返回经过函数封装的 JSON 数据，实现跨域数据获取。
2. CORS（Cross-Origin Resource Sharing）：在服务端设置响应头信息，允许特定域名的请求进行跨域访问。需要注意，在浏览器环境下，只有针对 XMLHttpRequest 或 Fetch 发起的非简单请求（如跨域的 POST、PUT、DELETE 请求等）才会触发预检请求（OPTIONS），来验证是否允许跨域访问。
3. 代理服务器：将前端的 HTTP 请求发送到同源的后端服务器，由后端服务器转发请求到目标服务器并返回响应。前端需要配置代理服务器的地址和路径映射关系，使得浏览器认为请求是同源的，从而避免跨域问题。
4. WebSocket：使用 WebSocket 协议进行通信，该协议可以在 JavaScript 中直接建立持久化的双向通信，不受同源策略限制。
5. Nginx 反向代理：通过在 Nginx 配置文件中添加反向代理规则，将前端请求转发到目标服务器，并在配置中设置跨域响应头信息，实现跨域访问。
6. postMessage API：使用 HTML5 提供的 postMessage API，在不同窗口或标签间进行安全跨域通信。
————————————————

## 51.什么是NGINX负载均衡，常用的NGINX负载均衡算法有哪些?
NGINX负载均衡是一种将网络流量平衡地分发到多个服务器上的技术，以实现高可用性、提高性能和扩展性。它可以根据预定的算法和规则将传入的请求动态地转发给后端的多台服务器进行处理。

常用的NGINX负载均衡算法包括：
————————————————
1. 轮询（Round Robin）：将请求按照顺序轮流分发给每台服务器，实现简单公平的负载均衡。
2. 加权轮询（Weighted Round Robin）：为每台服务器分配一个权重值，根据权重不同来决定分发请求的比例，使得处理能力较强的服务器能够处理更多的请求。
3. IP哈希（IP Hash）：根据客户端的IP地址进行哈希计算，确定将该请求发送给固定的一台服务器，这样可以保证相同IP的请求 always land on the same server。
4. 最少连接（Least Connections）：将新的请求发送到当前连接数最少的服务器，以实现负载均衡和避免因某些请求需要更长时间导致服务器负载过高的问题。
5. 动态负载（Dynamic Load）：通过监控服务器的负载情况，动态地调整权重或者添加/移除服务器，以确保系统在任何情况下都能够保持平衡。
## 53.说一下DOM0、DOM2、DOM3事件处理的区别是什么？
- DOM0事件处理：是最早出现的一种事件处理方式，通过在DOM节点上直接指定事件处理函数来实现。
- DOM2事件处理：DOM2级事件定义了两种方法，addEventListener和removeEventListener，它们可以动态地添加和移除事件处理函数。DOM2事件处理可以添加多个事件处理函数，它们按照添加的顺序依次执行
- DOM3事件处理：DOM3级事件增加了更多的事件类型，例如鼠标滚轮事件、键盘按键事件、文本输入事件等。除此之外，DOM3事件处理还增加了更多的方法，例如preventDefault()、stopPropagation()、stopImmediatePropagation()等，这些方法可以更加精确地控制事件的传播和处理。
————————————————



